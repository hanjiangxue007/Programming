/*1)	Write a program to input roll no, name and address of different students and write them in a data file.*/
#include<stdio.h>
#include<conio.h>
main()
{
	struct student
	{
		int rn;
		char name[40];
		char adr[60];
	}s;
	char next='y';
	FILE *fp;
	fp=fopen("student.dat","w");
	if(fp==NULL)
	{
		printf("\nFile creation error ");
		getch();
		exit(0);
	}
	
	while(next=='y'||next=='Y')
	{
		printf("\nEnter the roll no. ");
		scanf("%d",s.rn);
		fflush(stdin);
		printf("\nEnter the name  ");
		gets(s.name);
		printf("\nEnter the address ");
		gets(s.adr);
		fwrite(&s,sizeof(s),1,fp);
		printf("\n\n Do you want to write the record of next student (Y/N)?  ");
		next=getche();
	}
	fclose(fp);
	getch();
}
...........................................................................................................................................................................
/*2)	Write a program to read the data from the data file created in Q.N. 1 and display the records appropriately on the screen.*/
#include<stdio.h>
#include<conio.h>
main()
{
	struct student
	{
		int rn;
		char name[40];
		char adr[60];
	}s;
	FILE *fp;
	fp=fopen("student.dat","r");
	if(fp==NULL)
	{
		printf("\nFile opening error ");
		getch();
		exit(0);
	}
	printf("\nRoll No\tName\tAddress");
	while(fread(&s,sizeof(s),1,fp)==1)
	{
		printf("\n%d\t%s\t%s",s.rn,s.name,s.adr);
	}
	fclose(fp);
	getch();
}
	

...........................................................................................................................................................................
/*3)	Write a program to update the record in the data file created in Q.N.1.*/
#include<stdio.h>
#include<conio.h>
main()
{
	struct student
	{
		int rn;
		char name[40];
		char adr[60];
	}s;
	int x;
	FILE *fp,*fp1;
	fp=fopen("std.dat","r");
	fp1=fopen("newstd.dat","w");
	
	if(fp==NULL||fp1==NULL)
	{
		printf("\nFile creation error ");
		getch();
		exit(0);
	}
	printf("\nEnter the roll no. of the student whose record you want to update ");
	scanf("%d",&x);
	while(fread(&s,sizeof(s),1,fp)==1)
	{
		if(s.rn==x)
		{
			printf("\nEnter the roll no. ");
			scanf("%d",s.rn);
			fflush(stdin);
			printf("\nEnter the name  ");
			gets(s.name);
			printf("\nEnter the address ");
			gets(s.adr);
			fwrite(&s,sizeof(s),1,fp1);
		}
		else
		{
			fwrite(&s,sizeof(s),1,fp1);
		}
	}
	fclose(fp);
	fclose(fp1);
	remove("std.dat");
	rename("newstd.dat","std.dat");
	getch();
}

...........................................................................................................................................................................
/*4)	Write a program to delete record from the data file created in Q.N.1.*/
#include<stdio.h>
#include<conio.h>
main()
{
	struct student
	{
		int rn;
		char name[40];
		char adr[60];
	}s;
	int x;
	FILE *fp,*fp1;
	fp=fopen("std.dat","r");
	fp1=fopen("newstd.dat","w");
	
	if(fp==NULL||fp1==NULL)
	{
		printf("\nFile creation error ");
		getch();
		exit(0);
	}
	printf("\nEnter the roll no. of the student whose record you want to delete ");
	scanf("%d",&x);
	while(fread(&s,sizeof(s),1,fp)==1)
	{
		if(s.rn==x)
		{
			continue;
		}
		else
		{
			fwrite(&s,sizeof(s),1,fp1);
		}
	}
	fclose(fp);
	fclose(fp1);
	remove("std.dat");
	rename("newstd.dat","std.dat");
	getch();
}
	

...........................................................................................................................................................................
/*5)	Write a program to enter employee code, name, post and monthly salary of different employees and write then in a data file.*/
#include<stdio.h>
#include<conio.h>
main()
{
	struct employee
	{
		int ecode;
		char name[40];
		char post[30];
		int msal;
	}e;
	char next='y';
	FILE *fp;
	fp=fopen("emp.dat","w");
	if(fp==NULL)
	{
		printf("\nFile creation error ");
		getch();
		exit(0);
	}
	
	while(next=='y'||next=='Y')
	{
		printf("\nEnter the employee code ");
		scanf("%d",e.ecode);
		fflush(stdin);
		printf("\nEnter the name  ");
		gets(e.name);
		printf("\nEnter the post ");
		gets(e.post);
		printf("\nEnter the monthly salary ");
		scanf("%d",e.msal);
		fwrite(&e,sizeof(e),1,fp);
		printf("\n\n Do you want to write the record of next student (Y/N)?  ");
		next=getche();
	}
	fclose(fp);
	getch();
}
	

...........................................................................................................................................................................
/*6)	Write a program to display records of the employees stored in Q.N.5.*/
#include<stdio.h>
#include<conio.h>
main()
{
	struct employee
	{
		int ecode;
		char name[40];
		char post[30];
		int msal;
	}e;
	FILE *fp;
	fp=fopen("emp.dat","r");
	if(fp==NULL)
	{
		printf("\nFile opening error ");
		getch();
		exit(0);
	}
	printf("\nEmployeeCode\tName\tPost\tMonthly Salary");
	while(fread(&e,sizeof(e),1,fp)==1)
	{
		printf("\n%d\t\t%s\t%s\t%d",e.ecode,e.name,e.post,e.msal);
	}
	fclose(fp);
	getch();
}
	
...........................................................................................................................................................................
/*7)	Write a program to update the records of the employees stored in Q.N.5.*/
#include<stdio.h>
#include<conio.h>
main()
{
	struct employee
	{
		int ecode;
		char name[40];
		char post[30];
		int msal;
	}e;
	int x;
	FILE *fp,*fp1;
	fp=fopen("emp.dat","r");
	fp1=fopen("newfp1.dat","w");
	if(fp==NULL)
	{
		printf("\nFile creation error ");
		getch();
		exit(0);
	}
	printf("\nEnter the employee code whose record you want to update ");
	scanf("%d",&x);
	while(fread(&e,sizeof(e),1,fp)==1)
	{
		if(x==e.ecode)
		{
			printf("\nEnter the employee code ");
			scanf("%d",e.ecode);
			fflush(stdin);
			printf("\nEnter the name  ");
			gets(e.name);
			printf("\nEnter the post ");
			gets(e.post);
			printf("\nEnter the monthly salary ");
			scanf("%d",e.msal);
			fwrite(&e,sizeof(e),1,fp1);
		}
		else
		{
			fwrite(&e,sizeof(e),1,fp1);
		}
	}
	fclose(fp);
	fclose(fp1);
	remove("emp.dat");
	rename("newemp.dat","emp.dat");
	getch();
}
	
...........................................................................................................................................................................
/*8)	Write a program to delete the record of the employee stored in Q.N.5.*/
#include<stdio.h>
#include<conio.h>
main()
{
	struct employee
	{
		int ecode;
		char name[40];
		char post[30];
		int msal;
	}e;
	int x;
	FILE *fp,*fp1;
	fp=fopen("emp.dat","r");
	fp1=fopen("newfp1.dat","w");
	if(fp==NULL)
	{
		printf("\nFile creation error ");
		getch();
		exit(0);
	}
	printf("\nEnter the employee code whose record you want to delete ");
	scanf("%d",&x);
	while(fread(&e,sizeof(e),1,fp)==1)
	{
		if(x==e.ecode)
		{
			continue;
		}
		else
		{
			fwrite(&e,sizeof(e),1,fp1);
		}
	}
	fclose(fp);
	fclose(fp1);
	remove("emp.dat");
	rename("newemp.dat","emp.dat");
	getch();
}
...........................................................................................................................................................................
/*9)	Write a program to display the following menu and ask the user to enter his/her choice and do the task accordingly.
a.	Append Record
b.	Read Record
c.	Update Record
d.	Delete Record
e.	Quit
*/
#include<stdio.h>
#include<conio.h>
main()
{
	struct student
	{
		int rn;
		char name[40];
		char adr[60];
	}s;
	int ch,x;
	char next='y';
	FILE *fp,*fp1;
	//to print menu
	printf("\n**********MENU**************");
	printf("\n1. Append Record");
	printf("\n2. Read Record");
	printf("\n3. Update Record");
	printf("\n4. Delete Record");
	printf("\n5. Quit");
	printf("\n\nEnter your choice ");
	scanf("%d",&ch);
	switch(ch)
	{
		case 1:
			fp=fopen("student.dat","a");
			if(fp==NULL)
			{
				printf("\nFile creation error ");
				getch();
				exit(0);
			}
			while(next=='y'||next=='Y')
			{
				printf("\nEnter the roll no. ");
				scanf("%d",s.rn);
				fflush(stdin);
				printf("\nEnter the name  ");
				gets(s.name);
				printf("\nEnter the address ");
				gets(s.adr);
				fwrite(&s,sizeof(s),1,fp);
				printf("\n\n Do you want to write the record of next student (Y/N)?  ");
				next=getche();
			}
			fclose(fp);
			break;
		case 2:
			fp=fopen("student.dat","r");
			if(fp==NULL)
			{
				printf("\nFile opening error ");
				getch();
				exit(0);
			}
			printf("\nRoll No\tName\tAddress");
			while(fread(&s,sizeof(s),1,fp)==1)
			{
				printf("\n%d\t%s\t%s",s.rn,s.name,s.adr);
			}
			fclose(fp);
			break;
		case 3:
			fp=fopen("std.dat","r");
			fp1=fopen("newstd.dat","w");
			if(fp==NULL||fp1==NULL)
			{
				printf("\nFile creation error ");
				getch();
				exit(0);
			}
			printf("\nEnter the roll no. of the student whose record you want to update ");
			scanf("%d",&x);
			while(fread(&s,sizeof(s),1,fp)==1)
			{
				if(s.rn==x)
				{
					printf("\nEnter the roll no. ");
					scanf("%d",s.rn);
					fflush(stdin);
					printf("\nEnter the name  ");
					gets(s.name);
					printf("\nEnter the address ");
					gets(s.adr);
					fwrite(&s,sizeof(s),1,fp1);
				}
				else
				{
					fwrite(&s,sizeof(s),1,fp1);
				}
			}
			fclose(fp);
			fclose(fp1);
			remove("std.dat");
			rename("newstd.dat","std.dat");
			break;
		case 4:
			fp=fopen("std.dat","r");
			fp1=fopen("newstd.dat","w");
			if(fp==NULL||fp1==NULL)
			{
				printf("\nFile creation error ");
				getch();
				exit(0);
			}
			printf("\nEnter the roll no. of the student whose record you want to delete ");
			scanf("%d",&x);
			while(fread(&s,sizeof(s),1,fp)==1)
			{
				if(s.rn==x)
				{
					continue;
				}
				else
				{
					fwrite(&s,sizeof(s),1,fp1);
				}
			}
			fclose(fp);
			fclose(fp1);
			remove("std.dat");
			rename("newstd.dat","std.dat");
			break;
		case 5:
			exit(0);
		default:
			printf("\nYou entered invalid number for your choice ");
			printf("\nPlease, enter your choice between 1 to 5 ");
	}
	getch();
}
	

...........................................................................................................................................................................

